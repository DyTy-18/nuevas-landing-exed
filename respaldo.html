<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bloque Matriz IA - Interactive Preview</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo:wght@100;300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "ibm-black": "#121212",
              "clinical-teal": "#0ee19f",
              "subtle-gray": "#f8fafc",
            },
            fontFamily: {
              sans: ['"Archivo"', "sans-serif"],
            },
            boxShadow: {
              "soft-xl": "0 20px 40px -10px rgba(0, 0, 0, 0.05)",
            },
          },
        },
      };
    </script>

    <style>
      body {
        font-family: "Archivo", sans-serif;
        background-color: #f8fafc;
      }

      /* Estilos Ecualizador */
      .eq-track-container {
        position: relative;
        height: 32px; /* Un poco más alto para mejor tacto */
        display: flex;
        align-items: center;
        cursor: pointer;
        width: 100%;
      }
      .eq-track-bg {
        position: absolute;
        width: 100%;
        height: 2px;
        background: #e5e7eb;
        border-radius: 99px;
      }
      .eq-fill {
        position: absolute;
        left: 0;
        height: 4px;
        background: #121212;
        transition: width 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        z-index: 1; /* Transición más rápida para preview */
        border-radius: 99px;
      }
      .eq-node {
        width: 16px;
        height: 16px;
        background: #ffffff;
        border: 2px solid #d1d5db;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        transition: all 0.2s ease;
        border-radius: 50%;
      }
      /* Hover suave en los nodos */
      .group:hover .eq-node {
        border-color: #9ca3af;
      }

      .eq-node.active {
        background: #0ee19f;
        border-color: #0ee19f;
        transform: translateY(-50%) scale(1.2);
        box-shadow: 0 0 0 4px rgba(14, 225, 159, 0.2);
      }
      /* Posiciones exactas */
      .n1 {
        left: 0%;
      }
      .n2 {
        left: 25%;
      }
      .n3 {
        left: 50%;
      }
      .n4 {
        left: 75%;
      }
      .n5 {
        left: 100%;
        margin-left: -16px;
      } /* Ajuste por el ancho del nodo */

      .click-layer {
        position: absolute;
        inset: 0;
        z-index: 10;
        display: flex;
      }
      .click-zone {
        flex: 1;
      } /* Zonas invisibles para hover/click */

      .btn-disabled {
        background-color: #e5e7eb !important;
        color: #9ca3af !important;
        cursor: not-allowed;
        pointer-events: none;
      }
      .desc-box {
        transition: all 0.3s ease;
      }
    </style>
  </head>
  <body class="p-4 md:p-10">
    <section id="matrix" class="w-full max-w-[1400px] mx-auto">
      <!-- Header -->
      <div
        class="mb-8 border-b border-gray-200 pb-6 flex flex-col md:flex-row justify-between items-end gap-6"
      >
        <div>
          <h2 class="text-3xl md:text-4xl font-light text-ibm-black mb-2">
            Matriz de Madurez IA
          </h2>
          <p class="text-sm text-gray-500 font-light max-w-lg">
            Pase el cursor sobre los puntos para previsualizar. Haga clic para
            seleccionar.
          </p>
        </div>
        <div class="text-right hidden md:block">
          <div class="flex items-center gap-2">
            <span
              class="w-2 h-2 bg-clinical-teal rounded-full animate-pulse"
            ></span>
            <span
              class="text-[10px] font-bold uppercase tracking-widest text-gray-400"
              >Escala 1 - 5</span
            >
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">
        <!-- COLUMNA IZQUIERDA: CONTROLES -->
        <div
          class="lg:col-span-8 bg-white border border-gray-200 p-6 md:p-10 shadow-soft-xl rounded-sm"
        >
          <div class="flex flex-col gap-10">
            <!-- 1. Sistemas -->
            <div class="group" onmouseleave="resetPreview('sys')">
              <div class="mb-4">
                <h4 class="text-xl font-medium text-ibm-black">
                  Sistemas y Tecnología
                </h4>
                <p class="text-base text-gray-500 mt-1">
                  ¿Cómo están conectados hoy los sistemas de tu institución?
                </p>
              </div>

              <div class="flex items-center gap-6">
                <div class="flex-grow relative h-10 flex items-center">
                  <div class="eq-track-container">
                    <div class="eq-track-bg"></div>
                    <div class="eq-fill" id="fill-sys" style="width: 0%"></div>
                    <div class="eq-node n1 active" id="node-sys-1"></div>
                    <div class="eq-node n2" id="node-sys-2"></div>
                    <div class="eq-node n3" id="node-sys-3"></div>
                    <div class="eq-node n4" id="node-sys-4"></div>
                    <div class="eq-node n5" id="node-sys-5"></div>

                    <!-- Capa de Interacción (Hover + Click) -->
                    <div class="click-layer">
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('sys', 1)"
                        onclick="setVal('sys', 1)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('sys', 2)"
                        onclick="setVal('sys', 2)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('sys', 3)"
                        onclick="setVal('sys', 3)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('sys', 4)"
                        onclick="setVal('sys', 4)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('sys', 5)"
                        onclick="setVal('sys', 5)"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="w-10 text-right">
                  <span
                    class="text-2xl font-mono text-gray-300 font-bold transition-colors duration-200"
                    id="val-sys"
                    >1</span
                  >
                </div>
              </div>

              <div
                class="mt-2 p-4 bg-subtle-gray rounded border-l-4 border-gray-200 transition-colors duration-300"
                id="box-sys"
              >
                <p class="text-sm text-ibm-black italic" id="desc-sys">
                  Los sistemas no se hablan entre sí y mucho se hace a mano.
                </p>
              </div>
            </div>

            <!-- 2. Datos -->
            <div class="group" onmouseleave="resetPreview('data')">
              <div class="mb-4">
                <h4 class="text-xl font-medium text-ibm-black">
                  Datos e Información
                </h4>
                <p class="text-base text-gray-500 mt-1">
                  ¿Qué tan confiable es la información con la que trabajan?
                </p>
              </div>

              <div class="flex items-center gap-6">
                <div class="flex-grow relative h-10 flex items-center">
                  <div class="eq-track-container">
                    <div class="eq-track-bg"></div>
                    <div class="eq-fill" id="fill-data" style="width: 0%"></div>
                    <div class="eq-node n1 active" id="node-data-1"></div>
                    <div class="eq-node n2" id="node-data-2"></div>
                    <div class="eq-node n3" id="node-data-3"></div>
                    <div class="eq-node n4" id="node-data-4"></div>
                    <div class="eq-node n5" id="node-data-5"></div>

                    <div class="click-layer">
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('data', 1)"
                        onclick="setVal('data', 1)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('data', 2)"
                        onclick="setVal('data', 2)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('data', 3)"
                        onclick="setVal('data', 3)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('data', 4)"
                        onclick="setVal('data', 4)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('data', 5)"
                        onclick="setVal('data', 5)"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="w-10 text-right">
                  <span
                    class="text-2xl font-mono text-gray-300 font-bold transition-colors duration-200"
                    id="val-data"
                    >1</span
                  >
                </div>
              </div>

              <div
                class="mt-2 p-4 bg-subtle-gray rounded border-l-4 border-gray-200 transition-colors duration-300"
                id="box-data"
              >
                <p class="text-sm text-ibm-black italic" id="desc-data">
                  La información está desordenada, incompleta o duplicada.
                </p>
              </div>
            </div>

            <!-- 3. Reglas -->
            <div class="group" onmouseleave="resetPreview('rules')">
              <div class="mb-4">
                <h4 class="text-xl font-medium text-ibm-black">
                  Reglas y Privacidad
                </h4>
                <p class="text-base text-gray-500 mt-1">
                  ¿Cómo se gestionan los datos y la toma de decisiones?
                </p>
              </div>

              <div class="flex items-center gap-6">
                <div class="flex-grow relative h-10 flex items-center">
                  <div class="eq-track-container">
                    <div class="eq-track-bg"></div>
                    <div
                      class="eq-fill"
                      id="fill-rules"
                      style="width: 0%"
                    ></div>
                    <div class="eq-node n1 active" id="node-rules-1"></div>
                    <div class="eq-node n2" id="node-rules-2"></div>
                    <div class="eq-node n3" id="node-rules-3"></div>
                    <div class="eq-node n4" id="node-rules-4"></div>
                    <div class="eq-node n5" id="node-rules-5"></div>

                    <div class="click-layer">
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('rules', 1)"
                        onclick="setVal('rules', 1)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('rules', 2)"
                        onclick="setVal('rules', 2)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('rules', 3)"
                        onclick="setVal('rules', 3)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('rules', 4)"
                        onclick="setVal('rules', 4)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('rules', 5)"
                        onclick="setVal('rules', 5)"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="w-10 text-right">
                  <span
                    class="text-2xl font-mono text-gray-300 font-bold transition-colors duration-200"
                    id="val-rules"
                    >1</span
                  >
                </div>
              </div>

              <div
                class="mt-2 p-4 bg-subtle-gray rounded border-l-4 border-gray-200 transition-colors duration-300"
                id="box-rules"
              >
                <p class="text-sm text-ibm-black italic" id="desc-rules">
                  No hay reglas claras sobre uso de datos o responsabilidades.
                </p>
              </div>
            </div>

            <!-- 4. Personas -->
            <div class="group" onmouseleave="resetPreview('people')">
              <div class="mb-4">
                <h4 class="text-xl font-medium text-ibm-black">Personas</h4>
                <p class="text-base text-gray-500 mt-1">
                  ¿Con qué tan preparado está el equipo para ejecutar mejoras
                  con tecnología?
                </p>
              </div>

              <div class="flex items-center gap-6">
                <div class="flex-grow relative h-10 flex items-center">
                  <div class="eq-track-container">
                    <div class="eq-track-bg"></div>
                    <div
                      class="eq-fill"
                      id="fill-people"
                      style="width: 0%"
                    ></div>
                    <div class="eq-node n1 active" id="node-people-1"></div>
                    <div class="eq-node n2" id="node-people-2"></div>
                    <div class="eq-node n3" id="node-people-3"></div>
                    <div class="eq-node n4" id="node-people-4"></div>
                    <div class="eq-node n5" id="node-people-5"></div>

                    <div class="click-layer">
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('people', 1)"
                        onclick="setVal('people', 1)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('people', 2)"
                        onclick="setVal('people', 2)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('people', 3)"
                        onclick="setVal('people', 3)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('people', 4)"
                        onclick="setVal('people', 4)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('people', 5)"
                        onclick="setVal('people', 5)"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="w-10 text-right">
                  <span
                    class="text-2xl font-mono text-gray-300 font-bold transition-colors duration-200"
                    id="val-people"
                    >1</span
                  >
                </div>
              </div>

              <div
                class="mt-2 p-4 bg-subtle-gray rounded border-l-4 border-gray-200 transition-colors duration-300"
                id="box-people"
              >
                <p class="text-sm text-ibm-black italic" id="desc-people">
                  No hay personas dedicadas a datos o mejora digital.
                </p>
              </div>
            </div>

            <!-- 5. Uso -->
            <div class="group" onmouseleave="resetPreview('use')">
              <div class="mb-4">
                <h4 class="text-xl font-medium text-ibm-black">
                  Uso real de IA
                </h4>
                <p class="text-base text-gray-500 mt-1">
                  ¿Qué tan avanzada está la institución en el uso práctico de
                  IA?
                </p>
              </div>

              <div class="flex items-center gap-6">
                <div class="flex-grow relative h-10 flex items-center">
                  <div class="eq-track-container">
                    <div class="eq-track-bg"></div>
                    <div class="eq-fill" id="fill-use" style="width: 0%"></div>
                    <div class="eq-node n1 active" id="node-use-1"></div>
                    <div class="eq-node n2" id="node-use-2"></div>
                    <div class="eq-node n3" id="node-use-3"></div>
                    <div class="eq-node n4" id="node-use-4"></div>
                    <div class="eq-node n5" id="node-use-5"></div>

                    <div class="click-layer">
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('use', 1)"
                        onclick="setVal('use', 1)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('use', 2)"
                        onclick="setVal('use', 2)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('use', 3)"
                        onclick="setVal('use', 3)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('use', 4)"
                        onclick="setVal('use', 4)"
                      ></div>
                      <div
                        class="click-zone"
                        onmouseenter="previewVal('use', 5)"
                        onclick="setVal('use', 5)"
                      ></div>
                    </div>
                  </div>
                </div>
                <div class="w-10 text-right">
                  <span
                    class="text-2xl font-mono text-gray-300 font-bold transition-colors duration-200"
                    id="val-use"
                    >1</span
                  >
                </div>
              </div>

              <div
                class="mt-2 p-4 bg-subtle-gray rounded border-l-4 border-gray-200 transition-colors duration-300"
                id="box-use"
              >
                <p class="text-sm text-ibm-black italic" id="desc-use">
                  No se usa IA; solo se habla del tema.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- COLUMNA DERECHA: SCORE (Ajustada para móvil) -->
        <div class="lg:col-span-4 sticky top-4 h-fit">
          <!-- Se redujo padding (p-6), altura mínima móvil (min-h-0) -->
          <div
            class="bg-ibm-black text-white p-6 lg:p-10 shadow-2xl relative overflow-hidden rounded-sm flex flex-col justify-between min-h-0 lg:min-h-[500px]"
          >
            <div
              class="absolute inset-0 opacity-10 pointer-events-none"
              style="
                background-image: radial-gradient(#ffffff 1px, transparent 1px);
                background-size: 20px 20px;
              "
            ></div>

            <div class="relative z-10 text-center mb-6">
              <span
                class="text-[10px] font-bold uppercase tracking-widest text-clinical-teal"
                >RESULTADO GLOBAL</span
              >
            </div>

            <!-- SCOREBOARD (Tamaños ajustados con lg: para desktop) -->
            <div
              class="relative z-10 flex flex-col items-center justify-center py-4 lg:py-6"
            >
              <!-- Reducido w-40 h-40 para móvil, w-64 h-64 para desktop -->
              <div class="relative w-40 h-40 lg:w-64 lg:h-64 mb-4 lg:mb-6">
                <svg class="w-full h-full -rotate-90">
                  <circle
                    cx="128"
                    cy="128"
                    r="110"
                    stroke="#262626"
                    stroke-width="6"
                    fill="none"
                    viewBox="0 0 256 256"
                  ></circle>
                  <circle
                    id="score-circle"
                    cx="128"
                    cy="128"
                    r="110"
                    stroke="#0ee19f"
                    stroke-width="10"
                    fill="none"
                    stroke-dasharray="691"
                    stroke-dashoffset="691"
                    viewBox="0 0 256 256"
                    class="transition-all duration-700 ease-out shadow-[0_0_15px_rgba(14,225,159,0.5)]"
                  ></circle>
                </svg>
                <div
                  class="absolute inset-0 flex flex-col items-center justify-center"
                >
                  <!-- Texto 5xl móvil, 8xl desktop -->
                  <span
                    class="text-5xl lg:text-8xl font-thin tracking-tighter"
                    id="total-score"
                    >5</span
                  >
                  <span
                    class="text-sm text-gray-500 mt-2 uppercase tracking-widest"
                    >/ 25 Pts</span
                  >
                </div>
              </div>
              <h3
                class="text-lg lg:text-xl uppercase tracking-[0.15em] text-clinical-teal font-bold mb-2 lg:mb-3 text-center"
                id="result-category"
              >
                NIVEL INICIAL
              </h3>
              <p
                class="text-xs lg:text-sm text-gray-300 text-center max-w-[280px] leading-relaxed font-light"
                id="result-action"
              >
                Primero hay que ordenar la base
              </p>
            </div>

            <div class="relative z-10 mt-6">
              <button
                onclick="openModal()"
                class="w-full py-4 bg-white text-ibm-black text-xs font-bold uppercase tracking-[0.2em] hover:bg-clinical-teal hover:text-ibm-black transition-colors flex items-center justify-center gap-3"
              >
                <span>GENERAR INFORME</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MODAL -->
    <div
      id="leadModal"
      class="fixed inset-0 z-[100] hidden flex items-center justify-center px-4"
    >
      <div
        class="absolute inset-0 bg-ibm-black/90 backdrop-blur-md transition-opacity"
        onclick="closeModal()"
      ></div>
      <div
        class="bg-white w-full max-w-md p-10 relative z-10 shadow-2xl transform scale-95 opacity-0 transition-all duration-300 flex flex-col rounded-sm border-t-4 border-clinical-teal"
        id="modalContent"
      >
        <div class="mb-8">
          <h3 class="text-2xl font-light text-ibm-black mb-1">
            Resultados Listos
          </h3>
          <p class="text-xs text-gray-500 uppercase tracking-wide">
            Ingrese sus datos para ver el informe detallado
          </p>
        </div>
        <form class="space-y-5">
          <div class="relative z-0 w-full group">
            <input
              type="text"
              id="inputName"
              class="block py-3 px-0 w-full text-sm text-ibm-black bg-transparent border-0 border-b border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-clinical-teal peer"
              placeholder=" "
              required
              oninput="validateForm()"
            />
            <label
              class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-clinical-teal peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
              >Nombre Completo</label
            >
          </div>
          <div class="relative z-0 w-full group">
            <input
              type="email"
              id="inputEmail"
              class="block py-3 px-0 w-full text-sm text-ibm-black bg-transparent border-0 border-b border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-clinical-teal peer"
              placeholder=" "
              required
              oninput="validateForm()"
            />
            <label
              class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-clinical-teal peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
              >Correo</label
            >
          </div>
          <div class="relative z-0 w-full group">
            <input
              type="tel"
              id="inputPhone"
              class="block py-3 px-0 w-full text-sm text-ibm-black bg-transparent border-0 border-b border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-clinical-teal peer"
              placeholder=" "
            />
            <label
              class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-clinical-teal peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
              >Número Telefónico</label
            >
          </div>
          <button
            type="button"
            id="btnSubmit"
            class="w-full py-4 text-white text-xs font-bold uppercase tracking-widest transition-all mt-6 btn-disabled"
          >
            Descargar Informe
          </button>
        </form>
        <button
          onclick="closeModal()"
          class="absolute top-4 right-4 text-gray-300 hover:text-ibm-black transition-colors"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            ></path>
          </svg>
        </button>
      </div>
    </div>

    <script>
      const matrixData = {
        sys: [
          "Los sistemas no se hablan entre sí y mucho se hace a mano.",
          "Tenemos un sistema principal, pero con poca conexión a otros.",
          "Algunos sistemas están conectados, no todos, y no siempre funciona bien.",
          "La mayoría de los sistemas están conectados y la información fluye.",
          "Los sistemas están bien integrados y la información está casi en tiempo real.",
        ],
        data: [
          "La información está desordenada, incompleta o duplicada.",
          "Hay información usable, pero requiere mucho trabajo manual.",
          "La información es bastante ordenada y se revisa periódicamente.",
          "La información es confiable, clara y se controla su calidad.",
          "La información está lista para usarse en análisis avanzados o IA.",
        ],
        rules: [
          "No hay reglas claras sobre uso de datos o responsabilidades.",
          "Hay reglas básicas de privacidad, pero no siempre se siguen.",
          "Existen responsables y reglas claras para usar la información.",
          "Las reglas se aplican de forma consistente y se revisan con frecuencia.",
          "Hay controles claros, ética definida y confianza en el uso de tecnología.",
        ],
        people: [
          "No hay personas dedicadas a datos o mejora digital.",
          "Hay interés, pero falta experiencia y tiempo asignado.",
          "Existen personas responsables y apoyo externo si es necesario.",
          "Hay un equipo interno con roles claros y apoyo directivo.",
          "El equipo puede diseñar, probar e implementar soluciones de forma continua.",
        ],
        use: [
          "No se usa IA; solo se habla del tema.",
          "Se han hecho pruebas pequeñas sin impacto real.",
          "Hay soluciones funcionando en algunas áreas.",
          "Varias áreas usan IA con resultados medidos.",
          "La IA está integrada al trabajo diario y genera valor claro.",
        ],
      };

      const currentScores = { sys: 1, data: 1, rules: 1, people: 1, use: 1 };

      function setVal(dim, val) {
        currentScores[dim] = val;
        updateVisuals(dim, val, false);
        calculateTotal();
      }

      // Función para previsualizar sin guardar
      function previewVal(dim, val) {
        updateVisuals(dim, val, true);
      }

      // Función para restaurar el valor guardado
      function resetPreview(dim) {
        updateVisuals(dim, currentScores[dim], false);
      }

      function updateVisuals(dim, val, isPreview) {
        let width =
          val === 2
            ? "25%"
            : val === 3
              ? "50%"
              : val === 4
                ? "75%"
                : val === 5
                  ? "100%"
                  : "0%";
        document.getElementById(`fill-${dim}`).style.width = width;

        for (let i = 1; i <= 5; i++) {
          const node = document.getElementById(`node-${dim}-${i}`);
          if (i <= val) node.classList.add("active");
          else node.classList.remove("active");
        }

        const numEl = document.getElementById(`val-${dim}`);
        numEl.innerText = val;

        // Estilos visuales para indicar "Preview" vs "Selected"
        if (isPreview) {
          numEl.classList.remove("text-gray-300");
          numEl.classList.add("text-clinical-teal");
          document
            .getElementById(`box-${dim}`)
            .classList.replace("border-gray-200", "border-clinical-teal");
        } else {
          numEl.classList.add("text-gray-300");
          numEl.classList.remove("text-clinical-teal");
          document
            .getElementById(`box-${dim}`)
            .classList.replace("border-clinical-teal", "border-gray-200");
        }

        // Actualizar texto descriptivo
        const desc = document.getElementById(`desc-${dim}`);
        if (desc) desc.innerText = matrixData[dim][val - 1];
      }

      function calculateTotal() {
        const values = Object.values(currentScores);
        const total = values.reduce((a, b) => a + b, 0);
        let category = "NIVEL INICIAL",
          action = "Primero hay que ordenar la base";
        if (total >= 10 && total <= 14) {
          category = "NIVEL BÁSICO";
          action = "Se puede empezar con pilotos simples";
        } else if (total >= 15 && total <= 18) {
          category = "NIVEL INTERMEDIO";
          action = "Listo para proyectos reales";
        } else if (total >= 19 && total <= 22) {
          category = "NIVEL AVANZADO";
          action = "Preparado para escalar";
        } else if (total >= 23) {
          category = "NIVEL LÍDER";
          action = "IA integrada al negocio";
        }

        document.getElementById("total-score").innerText = total;
        document.getElementById("result-category").innerText = category;
        document.getElementById("result-action").innerText = action;

        // Circle math: Radius 110 -> Circumference 2 * pi * 110 ≈ 691
        const maxOffset = 691;
        document.getElementById("score-circle").style.strokeDashoffset =
          maxOffset - Math.max(0, (total - 5) / 20) * maxOffset;
      }

      function validateForm() {
        const name = document.getElementById("inputName").value.trim();
        const email = document.getElementById("inputEmail").value.trim();
        const btn = document.getElementById("btnSubmit");
        if (name !== "" && email !== "") {
          btn.classList.remove("btn-disabled");
          btn.classList.add("bg-ibm-black", "hover:bg-gray-800");
        } else {
          btn.classList.add("btn-disabled");
          btn.classList.remove("bg-ibm-black", "hover:bg-gray-800");
        }
      }
      function openModal() {
        const m = document.getElementById("leadModal"),
          c = document.getElementById("modalContent");
        m.classList.remove("hidden");
        setTimeout(() => {
          c.classList.remove("scale-95", "opacity-0");
          c.classList.add("scale-100", "opacity-100");
        }, 10);
      }
      function closeModal() {
        const m = document.getElementById("leadModal"),
          c = document.getElementById("modalContent");
        c.classList.remove("scale-100", "opacity-100");
        c.classList.add("scale-95", "opacity-0");
        setTimeout(() => m.classList.add("hidden"), 300);
      }

      // Inicialización
      ["sys", "data", "rules", "people", "use"].forEach((dim) =>
        updateVisuals(dim, 1, false),
      );
      calculateTotal();
    </script>
  </body>
</html>

<section
  id="matrix"
  class="py-16 md:py-24 bg-subtle-gray border-t border-gray-100"
>
  <div class="w-full max-w-[1400px] mx-auto px-6 lg:px-12">
    <div
      class="mb-10 border-b border-gray-200 pb-6 flex flex-col md:flex-row justify-between items-end gap-6 reveal"
    >
      <div>
        <h2 class="text-3xl md:text-4xl font-light text-ibm-black mb-2">
          Herramienta de Diagnóstico
        </h2>
        <p class="text-sm text-gray-500 font-light max-w-lg">
          Configure los 5 parámetros clave para calcular el índice de madurez de
          su infraestructura.
        </p>
      </div>
      <div class="text-right hidden md:block">
        <div class="flex items-center gap-2">
          <span
            class="w-2 h-2 bg-clinical-teal rounded-full animate-pulse"
          ></span>
          <span
            class="text-[10px] font-bold uppercase tracking-widest text-gray-400"
            >Sistema Activo</span
          >
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-0 lg:gap-8 reveal">
      <!-- COLUMNA IZQUIERDA: CONTROLES -->
      <div
        class="lg:col-span-8 bg-white border border-gray-200 p-6 md:p-8 shadow-soft-xl rounded-sm"
      >
        <div class="flex flex-col h-full justify-between gap-4">
          <div
            class="grid grid-cols-12 text-[9px] uppercase tracking-widest text-gray-400 font-bold mb-1 pb-3 border-b border-gray-100"
          >
            <div class="col-span-4 md:col-span-3">Parámetro</div>
            <div class="col-span-6 md:col-span-8 text-center">
              Nivel de Integración
            </div>
            <div class="col-span-2 md:col-span-1 text-right">Valor</div>
          </div>

          <!-- Row 1: Infra -->
          <div
            class="group py-2 hover:bg-gray-50 transition-colors border-b border-gray-50 cursor-pointer -mx-4 px-4"
            id="row-infra"
            onmouseenter="previewVal('infra', currentScores['infra'])"
          >
            <div class="grid grid-cols-12 items-center gap-4">
              <div class="col-span-4 md:col-span-3">
                <h4 class="text-sm font-semibold text-ibm-black">
                  Infraestructura
                </h4>
              </div>
              <div class="col-span-6 md:col-span-8 relative">
                <div class="eq-track-container">
                  <div class="eq-track-bg"></div>
                  <div class="eq-fill" id="fill-infra" style="width: 0%"></div>
                  <div class="eq-node n1 active" id="node-infra-1"></div>
                  <div class="eq-node n2" id="node-infra-2"></div>
                  <div class="eq-node n3" id="node-infra-3"></div>
                  <div class="eq-node n4" id="node-infra-4"></div>
                  <div class="click-layer">
                    <div
                      class="click-zone"
                      onclick="setVal('infra', 1)"
                      onmouseenter="previewVal('infra', 1)"
                      onmouseleave="resetPreview('infra')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('infra', 2)"
                      onmouseenter="previewVal('infra', 2)"
                      onmouseleave="resetPreview('infra')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('infra', 3)"
                      onmouseenter="previewVal('infra', 3)"
                      onmouseleave="resetPreview('infra')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('infra', 4)"
                      onmouseenter="previewVal('infra', 4)"
                      onmouseleave="resetPreview('infra')"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-span-2 md:col-span-1 text-right">
                <span
                  class="text-sm font-mono text-gray-400 font-medium"
                  id="val-infra"
                  >01</span
                >
              </div>
            </div>
          </div>

          <!-- Row 2: Data -->
          <div
            class="group py-2 hover:bg-gray-50 transition-colors border-b border-gray-50 cursor-pointer -mx-4 px-4"
            id="row-data"
            onmouseenter="previewVal('data', currentScores['data'])"
          >
            <div class="grid grid-cols-12 items-center gap-4">
              <div class="col-span-4 md:col-span-3">
                <h4 class="text-sm font-semibold text-ibm-black">
                  Calidad Datos
                </h4>
              </div>
              <div class="col-span-6 md:col-span-8 relative">
                <div class="eq-track-container">
                  <div class="eq-track-bg"></div>
                  <div class="eq-fill" id="fill-data" style="width: 0%"></div>
                  <div class="eq-node n1 active" id="node-data-1"></div>
                  <div class="eq-node n2" id="node-data-2"></div>
                  <div class="eq-node n3" id="node-data-3"></div>
                  <div class="eq-node n4" id="node-data-4"></div>
                  <div class="click-layer">
                    <div
                      class="click-zone"
                      onclick="setVal('data', 1)"
                      onmouseenter="previewVal('data', 1)"
                      onmouseleave="resetPreview('data')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('data', 2)"
                      onmouseenter="previewVal('data', 2)"
                      onmouseleave="resetPreview('data')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('data', 3)"
                      onmouseenter="previewVal('data', 3)"
                      onmouseleave="resetPreview('data')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('data', 4)"
                      onmouseenter="previewVal('data', 4)"
                      onmouseleave="resetPreview('data')"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-span-2 md:col-span-1 text-right">
                <span
                  class="text-sm font-mono text-gray-400 font-medium"
                  id="val-data"
                  >01</span
                >
              </div>
            </div>
          </div>

          <!-- Row 3: Gov -->
          <div
            class="group py-2 hover:bg-gray-50 transition-colors border-b border-gray-50 cursor-pointer -mx-4 px-4"
            id="row-gov"
            onmouseenter="previewVal('gov', currentScores['gov'])"
          >
            <div class="grid grid-cols-12 items-center gap-4">
              <div class="col-span-4 md:col-span-3">
                <h4 class="text-sm font-semibold text-ibm-black">Gobernanza</h4>
              </div>
              <div class="col-span-6 md:col-span-8 relative">
                <div class="eq-track-container">
                  <div class="eq-track-bg"></div>
                  <div class="eq-fill" id="fill-gov" style="width: 0%"></div>
                  <div class="eq-node n1 active" id="node-gov-1"></div>
                  <div class="eq-node n2" id="node-gov-2"></div>
                  <div class="eq-node n3" id="node-gov-3"></div>
                  <div class="eq-node n4" id="node-gov-4"></div>
                  <div class="click-layer">
                    <div
                      class="click-zone"
                      onclick="setVal('gov', 1)"
                      onmouseenter="previewVal('gov', 1)"
                      onmouseleave="resetPreview('gov')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('gov', 2)"
                      onmouseenter="previewVal('gov', 2)"
                      onmouseleave="resetPreview('gov')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('gov', 3)"
                      onmouseenter="previewVal('gov', 3)"
                      onmouseleave="resetPreview('gov')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('gov', 4)"
                      onmouseenter="previewVal('gov', 4)"
                      onmouseleave="resetPreview('gov')"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-span-2 md:col-span-1 text-right">
                <span
                  class="text-sm font-mono text-gray-400 font-medium"
                  id="val-gov"
                  >01</span
                >
              </div>
            </div>
          </div>

          <!-- Row 4: Talent -->
          <div
            class="group py-2 hover:bg-gray-50 transition-colors border-b border-gray-50 cursor-pointer -mx-4 px-4"
            id="row-talent"
            onmouseenter="previewVal('talent', currentScores['talent'])"
          >
            <div class="grid grid-cols-12 items-center gap-4">
              <div class="col-span-4 md:col-span-3">
                <h4 class="text-sm font-semibold text-ibm-black">Talentos</h4>
              </div>
              <div class="col-span-6 md:col-span-8 relative">
                <div class="eq-track-container">
                  <div class="eq-track-bg"></div>
                  <div class="eq-fill" id="fill-talent" style="width: 0%"></div>
                  <div class="eq-node n1 active" id="node-talent-1"></div>
                  <div class="eq-node n2" id="node-talent-2"></div>
                  <div class="eq-node n3" id="node-talent-3"></div>
                  <div class="eq-node n4" id="node-talent-4"></div>
                  <div class="click-layer">
                    <div
                      class="click-zone"
                      onclick="setVal('talent', 1)"
                      onmouseenter="previewVal('talent', 1)"
                      onmouseleave="resetPreview('talent')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('talent', 2)"
                      onmouseenter="previewVal('talent', 2)"
                      onmouseleave="resetPreview('talent')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('talent', 3)"
                      onmouseenter="previewVal('talent', 3)"
                      onmouseleave="resetPreview('talent')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('talent', 4)"
                      onmouseenter="previewVal('talent', 4)"
                      onmouseleave="resetPreview('talent')"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-span-2 md:col-span-1 text-right">
                <span
                  class="text-sm font-mono text-gray-400 font-medium"
                  id="val-talent"
                  >01</span
                >
              </div>
            </div>
          </div>

          <!-- Row 5: Use -->
          <div
            class="group py-2 hover:bg-gray-50 transition-colors cursor-pointer -mx-4 px-4"
            id="row-use"
            onmouseenter="previewVal('use', currentScores['use'])"
          >
            <div class="grid grid-cols-12 items-center gap-4">
              <div class="col-span-4 md:col-span-3">
                <h4 class="text-sm font-semibold text-ibm-black">
                  Casos de Uso
                </h4>
              </div>
              <div class="col-span-6 md:col-span-8 relative">
                <div class="eq-track-container">
                  <div class="eq-track-bg"></div>
                  <div class="eq-fill" id="fill-use" style="width: 0%"></div>
                  <div class="eq-node n1 active" id="node-use-1"></div>
                  <div class="eq-node n2" id="node-use-2"></div>
                  <div class="eq-node n3" id="node-use-3"></div>
                  <div class="eq-node n4" id="node-use-4"></div>
                  <div class="click-layer">
                    <div
                      class="click-zone"
                      onclick="setVal('use', 1)"
                      onmouseenter="previewVal('use', 1)"
                      onmouseleave="resetPreview('use')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('use', 2)"
                      onmouseenter="previewVal('use', 2)"
                      onmouseleave="resetPreview('use')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('use', 3)"
                      onmouseenter="previewVal('use', 3)"
                      onmouseleave="resetPreview('use')"
                    ></div>
                    <div
                      class="click-zone"
                      onclick="setVal('use', 4)"
                      onmouseenter="previewVal('use', 4)"
                      onmouseleave="resetPreview('use')"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-span-2 md:col-span-1 text-right">
                <span
                  class="text-sm font-mono text-gray-400 font-medium"
                  id="val-use"
                  >01</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- COLUMNA DERECHA: RESULTADOS -->
      <div
        class="lg:col-span-4 bg-ibm-black text-white p-6 md:p-8 flex flex-col justify-between shadow-2xl h-full min-h-[450px] relative overflow-hidden rounded-sm"
      >
        <div
          class="absolute inset-0 opacity-10 pointer-events-none"
          style="
            background-image: radial-gradient(#ffffff 1px, transparent 1px);
            background-size: 20px 20px;
          "
        ></div>

        <div class="relative z-10 mb-6">
          <div class="flex items-center justify-between mb-4 h-6">
            <span
              class="text-[10px] font-bold uppercase tracking-widest text-clinical-teal"
              id="diag-title"
              >INFRAESTRUCTURA</span
            >
            <span
              class="text-[9px] font-bold uppercase tracking-widest text-white/40 opacity-0 transition-opacity duration-200 border border-white/20 px-2 py-1"
              id="preview-tag"
              >VISTA PREVIA</span
            >
          </div>

          <div class="desc-container">
            <p
              class="text-xl md:text-2xl font-light leading-snug transition-opacity duration-300"
              id="diag-text"
            >
              Sistemas aislados, poca integración entre departamentos.
            </p>
          </div>
        </div>

        <div
          class="relative z-10 flex flex-col items-center justify-center flex-grow py-6 border-t border-white/10 border-b"
        >
          <div class="relative w-40 h-40 mb-3">
            <svg class="w-full h-full -rotate-90">
              <circle
                cx="80"
                cy="80"
                r="70"
                stroke="#262626"
                stroke-width="2"
                fill="none"
              ></circle>
              <circle
                id="score-circle"
                cx="80"
                cy="80"
                r="70"
                stroke="#0ee19f"
                stroke-width="4"
                fill="none"
                stroke-dasharray="440"
                stroke-dashoffset="440"
                class="transition-all duration-700"
              ></circle>
            </svg>
            <div
              class="absolute inset-0 flex flex-col items-center justify-center"
            >
              <span class="text-6xl font-thin tracking-tighter" id="total-score"
                >1.0</span
              >
            </div>
          </div>
          <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400">
            Índice Global
          </p>
        </div>

        <div class="relative z-10 mt-8">
          <button
            onclick="openModal()"
            class="w-full py-4 bg-white text-ibm-black text-xs font-bold uppercase tracking-[0.2em] hover:bg-clinical-teal hover:text-ibm-black transition-colors flex items-center justify-center gap-3"
          >
            <span>GENERAR INFORME</span>
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

Herramienta de Diagnóstico
